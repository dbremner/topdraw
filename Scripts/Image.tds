// Fill menubar
menubar.fillLayer(new Gradient(new Color("white"), new Color));

// Fill with desktop with black
desktop.fillLayer(new Color("black"));
var db = desktop.bounds;

// Create a layer with a frame and a rounded rectangle
var r = new Rect(0, 0, 400, 200);
var layer = new Layer(r);
var rnd = new Randomizer(0.1, 1);

// Randomize the line width
var w = 10 * rnd.floatValue;
layer.lineWidth = w;

// Create a rounded rect inside the layer and fill it with a gradient
layer.beginPath();
layer.roundedRect(r, 20);
var c = new Color;
c.a = 0.5;
layer.strokeColor = c;
layer.save();
layer.clip();
var color1 = new Color;
var color2 = new Color;
color1.a = color2.a = 0.3;
layer.fillLayer(new Gradient(color1, color2));
layer.restore();
layer.fillStroke();

// Draw a stroked rounded rectangle in the layer
c = new Color;
c.a = 0.5;
layer.fillColor = c;
r.x = r.y = 10 + 40 * rnd.floatValue;
r.width = 100 + 100 * rnd.floatValue;
r.height = 50 + 50 * rnd.floatValue;
var radius = 20 * rnd.floatValue;
layer.beginPath();
layer.roundedRect(r, radius);
layer.stroke();

// Draw some text

// Create an image with that layer
var i = new Image(layer);
r.width = i.width;
r.height = i.height;

// Draw the image several times
var inc = 50 * rnd.floatValue;
var xScale = 100 * rnd.floatValue;
var yOffset = (db.height - r.height) * rnd.floatValue;
for (x = 50 * rnd.floatValue; x < (db.width - r.width); x += inc) {
	r.x =  x * 8;
	r.y = yOffset + Math.sin(x / xScale) * x;
	desktop.drawImageInRect(i, r);
}


